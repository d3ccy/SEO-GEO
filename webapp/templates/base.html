<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Numiko SEO-GEO Toolkit{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <meta name="csrf-token" content="{{ csrf_token() }}">
</head>
<body>
  <nav class="nav">
    <div class="nav-brand">
      <a href="{{ url_for('index') }}" aria-label="Numiko â€” home">
        <!-- Numiko wordmark SVG -->
        <svg height="36" viewBox="0 0 31 60" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="width:auto;height:36px;display:block;fill:white;">
          <g fill="currentColor">
            <path d="M17.863 40.852v19.15c-2.819 0-5.102-2.305-5.102-5.126V45.98c0-2.82 2.286-5.127 5.102-5.127ZM6.38 0v19.15h5.103V5.126C11.483 2.306 9.197 0 6.381 0Zm0 25.552v14.024h5.103v-19.15c-2.819 0-5.102 2.306-5.102 5.127Zm0 24.238c2.82 0 5.103-2.306 5.103-5.127v-3.81H6.381v8.936Zm0 1.276v8.936h5.103v-3.81c0-2.82-2.286-5.126-5.102-5.126ZM5.102 34.468H0V60h5.102zM5.102 0H0v19.15h5.102zm19.139 0h-5.102v19.15h5.102zm6.378 20.426h-5.102v19.15h5.102zm0-6.384h-5.102v5.106h5.102zm0 40.853h-5.102V60h5.102zm-11.48-34.469v19.15h5.102V25.552c0-2.82-2.286-5.126-5.102-5.126m-6.38-6.402c0 2.82 2.286 5.126 5.102 5.126V0H12.76zm5.102 6.402H12.76v19.15h5.102v-19.15Zm1.278 20.426v19.15c2.819 0 5.102-2.305 5.102-5.126V45.98c0-2.82-2.286-5.127-5.102-5.127Z"/>
          </g>
        </svg>
      </a>
    </div>
    {% if current_user.is_authenticated %}
    <ul class="nav-links">
      <li><a href="{{ url_for('audit') }}" {% if request.endpoint == 'audit' %}class="active"{% endif %}>GEO Audit</a></li>
      <li><a href="{{ url_for('keywords') }}" {% if request.endpoint == 'keywords' %}class="active"{% endif %}>Keywords</a></li>
      <li><a href="{{ url_for('ai_visibility') }}" {% if request.endpoint == 'ai_visibility' %}class="active"{% endif %}>AI Visibility</a></li>
      <li><a href="{{ url_for('domain') }}" {% if request.endpoint == 'domain' %}class="active"{% endif %}>Domain</a></li>
      <li><a href="{{ url_for('content_guide') }}" {% if request.endpoint == 'content_guide' %}class="active"{% endif %}>Content Guide</a></li>
      <li><a href="{{ url_for('clients') }}" {% if request.endpoint in ('clients', 'client_new', 'client_edit') %}class="active"{% endif %}>Clients</a></li>
      {% if current_user.is_admin %}
      <li><a href="{{ url_for('auth.admin_users') }}" {% if request.endpoint == 'auth.admin_users' %}class="active"{% endif %}>Users</a></li>
      {% endif %}
    </ul>

    <div class="nav-user">
      <span class="nav-user-name">{{ current_user.name }}</span>
      <a href="{{ url_for('auth.logout') }}" class="nav-user-logout">Log out</a>
    </div>
    {% endif %}
  </nav>

  <main class="container">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash flash-{{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <!-- Quick-create client modal (shared across all tool pages) -->
  <div id="add-client-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="add-client-modal-title" hidden>
    <div class="modal-dialog">
      <div class="modal-header">
        <h2 id="add-client-modal-title" class="modal-title">New Client</h2>
        <button type="button" class="modal-close" aria-label="Close modal">&#x2715;</button>
      </div>
      <form id="add-client-form" class="modal-body" novalidate>
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <div class="form-group">
          <label for="new-client-name">Client name <span class="required">*</span></label>
          <input type="text" id="new-client-name" name="name" required
                 placeholder="e.g. Tate Modern" autocomplete="organization">
        </div>

        <div class="form-group">
          <label for="new-client-domain">Domain</label>
          <input type="text" id="new-client-domain" name="domain"
                 placeholder="e.g. tate.org.uk">
        </div>

        <div class="form-group">
          <label for="new-client-project">Project name <span class="optional">(optional)</span></label>
          <input type="text" id="new-client-project" name="project_name"
                 placeholder="e.g. Website Relaunch 2026">
        </div>

        <div class="modal-error" role="alert" aria-live="polite"></div>

        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Create Client</button>
          <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
